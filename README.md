# PRJ006 - S3 Lifecycle Policy with Object Tagging and Inventory

## Overview
This project demonstrates how to create an Amazon S3 bucket with a lifecycle policy that automatically moves older files to cheaper storage classes. By using object tags, the lifecycle rule applies only to specific files you choose, allowing you to fine tune cost savings without affecting all bucket contents. An optional S3 Inventory report provides daily confirmation that the transitions have occurred.  

A good analogy is moving seasonal clothes from your main closet to labeled bins in the attic. You keep them, but in a space that costs less to use.

## AWS Services Used
- **Amazon S3**: Stores your objects in buckets and supports lifecycle policies.
- **S3 Lifecycle Rules**: Define when objects transition to colder storage classes or expire.
- **S3 Object Tags**: Key value labels on objects, used here to target specific files for transition.
- **S3 Inventory** *(optional)*: Produces daily CSV listings of objects and their storage classes for auditing.
- **Amazon Athena** *(optional)*: Lets you query inventory CSV reports with SQL from the console.
- **Amazon CloudWatch** *(optional)*: Displays storage usage metrics by class over time.
- **Amazon SNS** *(optional)*: Sends notifications when new inventory reports arrive.

## Architecture
1. **Source Bucket**: Stores the files you want to manage with lifecycle policies.
2. **Inventory Bucket**: Stores the daily inventory CSV report generated by S3 Inventory.
3. **Lifecycle Rule**: Targets only objects with a specific tag (key: `lifecycle`, value: `test`), and transitions them to Glacier Instant Retrieval after 1 day.
4. **Object Tagging**: Applied during upload to mark which files the lifecycle rule should act on.
5. **Optional Monitoring**: Inventory reports can be queried in Athena, metrics can be viewed in CloudWatch, and SNS can alert when a report is delivered.

**Mental Model**: Your source bucket is a closet, the object tag is a sticker saying “move me later,” and the lifecycle rule is a calendar reminder to move the stickered items to the attic.

## Key Learning Outcomes
- How to configure and scope S3 lifecycle rules using object tags.
- How to verify storage class transitions with S3 Inventory.
- How to integrate optional AWS services like Athena, CloudWatch, and SNS for monitoring and alerts.
- How lifecycle transitions can reduce costs while retaining data.

## Testing
- Upload several small files with the target tag and verify their initial storage class is Standard.
- Wait 24–48 hours for the lifecycle evaluation to run.
- Confirm in the S3 console that the tagged objects have transitioned to Glacier Instant Retrieval.
- Optionally, download the S3 Inventory CSV from the inventory bucket and confirm the `StorageClass` field.

## Cleanup
To avoid charges from Glacier minimum storage durations:
1. Delete the test objects in the source bucket.
2. Delete or disable the lifecycle rule.
3. Delete the inventory configuration, then empty and delete the inventory bucket after the final report.
4. If used, drop Athena tables and databases, and delete SNS topics and subscriptions.

## Optional Enhancements
- Add additional transitions, such as Glacier Deep Archive for long term retention.
- Use prefix based rules instead of tags to target specific folders.
- Turn on bucket versioning and add separate transitions for previous versions.
- Consider S3 Intelligent Tiering for objects with unpredictable access patterns.
- Add S3 Event Notifications on the inventory bucket to send alerts when new reports arrive.

---

*Part of the 52 AWS Projects in 52 Weeks challenge.*
